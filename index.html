<html>
    <script src="proxyGroup.js"></script>
    <script>
        const test = { c: 10, inc: () => { return ++test.c; } };

        async function example1() {
            const g1 = new ProxyGroup({ gid: "l" });
            const g2 = new ProxyGroup({ gid: "r", console: console });
            g1.setLocalMessageOutCallback(message => g2.remoteMessageIn(message));
            g2.setLocalMessageOutCallback(message => g1.remoteMessageIn(message));

            g1.localRoots.a = 24;
            g1.localRoots.o = test;

            console.log(await g2.remoteRoots.a);
            console.log(await g2.remoteRoots.o.c);
            console.log(await g2.remoteRoots.o.inc());
            console.log(await g2.remoteRoots.o.c);
        }
    </script>
    <body>
        <button id="example1">example1</button>
        <script>
            document.getElementById("example1").addEventListener("click", example1);
        </script>
    </body>
</html>